buildscript {
    repositories {
     jcenter()
        mavenCentral()
       
        
    }

    dependencies {
        //classpath 'com.bmuschko:gradle-tomcat-plugin:2.2.4'
        classpath 'org.akhikhl.gretty:gretty:+'
        
    }
}
apply plugin: 'war'
//apply plugin: 'jetty'
//apply plugin: 'com.bmuschko.tomcat'
apply plugin: 'org.akhikhl.gretty'
sourceSets {
    main {
        java {
            srcDirs 'src'
        }
        resources {

        }
    }
}

dependencies {
    //test依赖bboss_rt和frameworkset_util的输出
    compileOnly(
            [group: 'org.apache.tomcat', name: 'tomcat-catalina', version: "8.0.33", transitive: false],
            [group: 'org.apache.tomcat', name: 'tomcat-coyote', version: "8.0.33", transitive: false],
            [group: 'org.apache.tomcat', name: 'tomcat-websocket', version: "8.0.33", transitive: true],
            [group: 'servletapi', name: 'servletapi', version: '2.4', transitive: false],
            [group: 'javax.servlet', name: 'jsp-api', version: '2.0', transitive: false]
    )

compile(
           [group: 'org.bbossgroups', name: 'bboss-util', version: "${version}", transitive: true]
    )
   /** def tomcatVersion = '8.0.33'
    tomcat "org.apache.tomcat.embed:tomcat-embed-core:${tomcatVersion}",
           "org.apache.tomcat.embed:tomcat-embed-logging-juli:${tomcatVersion}",
           "org.apache.tomcat.embed:tomcat-embed-jasper:${tomcatVersion}"
    */
}
gretty {
  port = 80
  contextPath = '/bboss-websocket'
  // ... many more properties
}
/**tomcat
{
	 httpPort = 80
}*/
war {
    from 'WebRoot'
    // adds a file-set to the root of the archive
    webInf { from 'WebRoot/WEB-INF' } // adds a file-set to the WEB-INF dir.
	
    classpath configurations.providedCompile // adds a configuration to the WEB-INF/lib dir.
    webXml = file('WebRoot/WEB-INF/web.xml') // copies a file to WEB-INF/web.xml
}
publishing {
    publications {
        mavenJava(MavenPublication) {
        	from components.java
            artifact war
        }
    }
    repositories {
        mavenLocal()
    }
}
webAppDirName = 'WebRoot'  